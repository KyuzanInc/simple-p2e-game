// SPDX-License-Identifier: MIT
pragma solidity >=0.7.0;

import {IVault} from "@balancer-labs/v2-interfaces/contracts/vault/IVault.sol";

interface IMinimumAuthorizer {
    function DEFAULT_ADMIN_ROLE() external returns (bytes32);
    function grantRole(bytes32 role, address account) external;
}

contract VaultDeployer {
    address public immutable vault;
    address public immutable authorizer;
    address public immutable woas;

    constructor(bytes32 salt) {
        bytes memory woasCode =
            hex"608060405234801561001057600080fd5b50604080518082018252600b81526a57726170706564204f415360a81b602080830191825283518085019094526004845263574f415360e01b90840152815191929161005e91600391610087565b508051610072906004906020840190610087565b50506005805460ff191660121790555061011a565b828054600181600116156101000203166002900490600052602060002090601f016020900481019282601f106100c857805160ff19168380011785556100f5565b828001600101855582156100f5579182015b828111156100f55782518255916020019190600101906100da565b50610101929150610105565b5090565b5b808211156101015760008155600101610106565b610a87806101296000396000f3fe6080604052600436106100c65760003560e01c8063395093511161007f578063a457c2d711610059578063a457c2d7146102f1578063a9059cbb1461032a578063d0e30db014610363578063dd62ed3e1461036b576100d5565b8063395093511461027057806370a08231146102a957806395d89b41146102dc576100d5565b806306fdde03146100da578063095ea7b31461016457806318160ddd146101b157806323b872dd146101d85780632e1a7d4d1461021b578063313ce56714610245576100d5565b366100d5576100d36103a6565b005b600080fd5b3480156100e657600080fd5b506100ef6103e8565b6040805160208082528351818301528351919283929083019185019080838360005b83811015610129578181015183820152602001610111565b50505050905090810190601f1680156101565780820380516001836020036101000a031916815260200191505b509250505060405180910390f35b34801561017057600080fd5b5061019d6004803603604081101561018757600080fd5b506001600160a01b03813516906020013561047e565b604080519115158252519081900360200190f35b3480156101bd57600080fd5b506101c6610494565b60408051918252519081900360200190f35b3480156101e457600080fd5b5061019d600480360360608110156101fb57600080fd5b506001600160a01b0381358116916020810135909116906040013561049a565b34801561022757600080fd5b506100d36004803603602081101561023e57600080fd5b50356104ee565b34801561025157600080fd5b5061025a6105b3565b6040805160ff9092168252519081900360200190f35b34801561027c57600080fd5b5061019d6004803603604081101561029357600080fd5b506001600160a01b0381351690602001356105bc565b3480156102b557600080fd5b506101c6600480360360208110156102cc57600080fd5b50356001600160a01b03166105f2565b3480156102e857600080fd5b506100ef61060d565b3480156102fd57600080fd5b5061019d6004803603604081101561031457600080fd5b506001600160a01b03813516906020013561066e565b34801561033657600080fd5b5061019d6004803603604081101561034d57600080fd5b506001600160a01b0381351690602001356106a7565b6100d36103a6565b34801561037757600080fd5b506101c66004803603604081101561038e57600080fd5b506001600160a01b03813581169160200135166106b4565b6103b033346106df565b60408051348152905133917fe1fffcc4923d04b559f4d29a8bfc6cda04eb5b0d3c460751c2402c5c5cc9109c919081900360200190a2565b60038054604080516020601f60026000196101006001881615020190951694909404938401819004810282018101909252828152606093909290918301828280156104745780601f1061044957610100808354040283529160200191610474565b820191906000526020600020905b81548152906001019060200180831161045757829003601f168201915b5050505050905090565b600061048b33848461077e565b50600192915050565b60025490565b60006104a78484846107e0565b6001600160a01b0384166000908152600160209081526040808320338085529252909120546104e49186916104df908661019e6108c8565b61077e565b5060019392505050565b806104f8336105f2565b1015610542576040805162461bcd60e51b8152602060048201526014602482015273496e73756666696369656e742062616c616e636560601b604482015290519081900360640190fd5b61054c33826108de565b604051339082156108fc029083906000818181858888f19350505050158015610579573d6000803e3d6000fd5b5060408051828152905133917f7fcf532c15f0a6db0bd6d0e038bea71d30d808c7d98cb3bf7268a95bf5081b65919081900360200190a250565b60055460ff1690565b3360008181526001602090815260408083206001600160a01b0387168452909152812054909161048b9185906104df908661099a565b6001600160a01b031660009081526020819052604090205490565b60048054604080516020601f60026000196101006001881615020190951694909404938401819004810282018101909252828152606093909290918301828280156104745780601f1061044957610100808354040283529160200191610474565b3360008181526001602090815260408083206001600160a01b0387168452909152812054909161048b9185906104df908661019f6108c8565b600061048b3384846107e0565b6001600160a01b03918216600090815260016020908152604080832093909416825291909152205490565b6106eb600083836109b3565b610705610700826106fa610494565b9061099a565b6109b8565b6001600160a01b038216600090815260208190526040902054610728908261099a565b6001600160a01b0383166000818152602081815260408083209490945583518581529351929391927fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef9281900390910190a35050565b6001600160a01b03808416600081815260016020908152604080832094871680845294825291829020859055815185815291517f8c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b9259281900390910190a3505050565b6107f76001600160a01b03841615156101986109bd565b61080e6001600160a01b03831615156101996109bd565b6108198383836109b3565b6001600160a01b03831660009081526020819052604090205461083f90826101a06108c8565b6001600160a01b03808516600090815260208190526040808220939093559084168152205461086e908261099a565b6001600160a01b038084166000818152602081815260409182902094909455805185815290519193928716927fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef92918290030190a3505050565b60006108d784841115836109bd565b5050900390565b6108f56001600160a01b038316151561019b6109bd565b610901826000836109b3565b6001600160a01b03821660009081526020819052604090205461092790826101b26108c8565b6001600160a01b0383166000908152602081905260409020556109556107008261094f610494565b906109cf565b6040805182815290516000916001600160a01b038516917fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef9181900360200190a35050565b60008282016109ac84821015836109bd565b9392505050565b505050565b600255565b816109cb576109cb816109dd565b5050565b60006109ac838360016108c8565b6109ed816210905360ea1b6109f0565b50565b62461bcd60e51b600090815260206004526007602452600a808404818106603090810160081b958390069590950190829004918206850160101b01602363ffffff0060e086901c160160181b0190930160c81b60445260e882901c90606490fdfea264697066735822122044fcf829d8e4ee0ee53a63e35c291b3d0b08fc10335a26769cecadedee51080a64736f6c63430007010033";
        bytes memory vaultCode =
            hex"6101806040523480156200001257600080fd5b5060405162006dc038038062006dc0833981016040819052620000359162000275565b8382826040518060400160405280601181526020017010985b185b98d95c88158c8815985d5b1d607a1b815250604051806040016040528060018152602001603160f81b815250306001600160a01b031660001b88806001600160a01b03166080816001600160a01b031660601b815250505030604051620000b79062000267565b620000c39190620002c1565b604051809103906000f080158015620000e0573d6000803e3d6000fd5b5060601b6001600160601b03191660a052600160005560c052815160209283012060e0528051910120610100527f8b73c3c69bb8fe3d512ecc4cf759cc79239f7b179b0ffacaa9a75d522b39400f6101205262000147630163f50083111561019462000180565b6200015b6276a70082111561019562000180565b429091016101408190520161016052620001758162000195565b5050505050620002eb565b8162000191576200019181620001f1565b5050565b6040516001600160a01b038216907f94b979b6831a51293e2641426f97747feed46f17779fed9cd18d1ecefcfe92ef90600090a2600380546001600160a01b0390921661010002610100600160a81b0319909216919091179055565b62000203816210905360ea1b62000206565b50565b62461bcd60e51b600090815260206004526007602452600a808404818106603090810160081b958390069590950190829004918206850160101b01602363ffffff0060e086901c160160181b0190930160c81b60445260e882901c90606490fd5b610b65806200625b83390190565b600080600080608085870312156200028b578384fd5b84516200029881620002d5565b6020860151909450620002ab81620002d5565b6040860151606090960151949790965092505050565b6001600160a01b0391909116815260200190565b6001600160a01b03811681146200020357600080fd5b60805160601c60a05160601c60c05160e05161010051610120516101405161016051615f0c6200034f60003980611a24525080611a005250806127b25250806127f45250806127d35250806110c15250806113755250806105085250615f0c6000f3fe6080604052600436106101855760003560e01c8063945bcec9116100d1578063e6c460921161008a578063f84d066e11610064578063f84d066e1461046a578063f94d46681461048a578063fa6e671d146104b9578063fec90d72146104d9576101b3565b8063e6c4609214610407578063ed24911d14610427578063f6c009271461043c576101b3565b8063945bcec914610365578063aaabadc514610378578063ad5c46481461039a578063b05f8e48146103af578063b95cac28146103df578063d2946c2b146103f2576101b3565b806352bbbe291161013e5780637d3aeb96116101185780637d3aeb96146102e5578063851c1bb3146103055780638bdb39131461032557806390193b7c14610345576101b3565b806352bbbe29146102925780635c38449e146102a557806366a9c7d2146102c5576101b3565b8063058a628f146101b857806309b2760f146101d85780630e8e3e841461020e5780630f5a6efa1461022157806316c38b3c1461024e5780631c0de0511461026e576101b3565b366101b3576101b1610195610506565b6001600160a01b0316336001600160a01b03161461020661052b565b005b600080fd5b3480156101c457600080fd5b506101b16101d33660046150cb565b61053d565b3480156101e457600080fd5b506101f86101f3366004615652565b610561565b6040516102059190615c8c565b60405180910390f35b6101b161021c366004615290565b610614565b34801561022d57600080fd5b5061024161023c366004615169565b610750565b6040516102059190615c56565b34801561025a57600080fd5b506101b16102693660046153cc565b6107e5565b34801561027a57600080fd5b506102836107fe565b60405161020593929190615c74565b6101f86102a03660046157f9565b610827565b3480156102b157600080fd5b506101b16102c03660046155c8565b6109c8565b3480156102d157600080fd5b506101b16102e03660046154b3565b610dca565b3480156102f157600080fd5b506101b1610300366004615485565b610f69565b34801561031157600080fd5b506101f86103203660046155a0565b6110bd565b34801561033157600080fd5b506101b161034036600461541c565b61110f565b34801561035157600080fd5b506101f86103603660046150cb565b611125565b6102416103733660046156f1565b611140565b34801561038457600080fd5b5061038d611274565b6040516102059190615ab1565b3480156103a657600080fd5b5061038d611288565b3480156103bb57600080fd5b506103cf6103ca36600461557c565b611297565b6040516102059493929190615e07565b6101b16103ed36600461541c565b61135a565b3480156103fe57600080fd5b5061038d611373565b34801561041357600080fd5b506101b16104223660046151b6565b611397565b34801561043357600080fd5b506101f86114b3565b34801561044857600080fd5b5061045c610457366004615404565b6114bd565b604051610205929190615ae9565b34801561047657600080fd5b5061024161048536600461566e565b6114e7565b34801561049657600080fd5b506104aa6104a5366004615404565b6115cb565b60405161020593929190615c20565b3480156104c557600080fd5b506101b16104d436600461511f565b6115ff565b3480156104e557600080fd5b506104f96104f43660046150e7565b611691565b6040516102059190615c69565b7f00000000000000000000000000000000000000000000000000000000000000005b90565b8161053957610539816116a6565b5050565b6105456116b6565b61054d6116cf565b610556816116fd565b61055e611759565b50565b600061056b6116b6565b610573611760565b60006105823384600654611775565b6000818152600560205260409020549091506105a49060ff16156101f461052b565b60008181526005602052604090819020805460ff1916600190811790915560068054909101905551339082907f3c13bc30b8e878c53fd2a36b679409c073afd75950be43d8858768e956fbc20e906105fd908790615d88565b60405180910390a3905061060f611759565b919050565b61061c6116b6565b6000806000805b845181101561073b5760008060008060006106518a878151811061064357fe5b6020026020010151896117b4565b9c50939850919650945092509050600185600381111561066d57fe5b14156106845761067f8483838661182c565b61072a565b8661069657610691611760565b600196505b60008560038111156106a457fe5b14156106d5576106b68483838661184f565b6106bf8461186f565b1561067f576106ce898461187c565b985061072a565b6106ea6106e18561186f565b1561020761052b565b60006106f585610528565b9050600286600381111561070557fe5b141561071c576107178184848761188e565b610728565b610728818484876118a7565b505b505060019093019250610623915050565b5061074583611915565b50505061055e611759565b606081516001600160401b038111801561076957600080fd5b50604051908082528060200260200182016040528015610793578160200160208202803683370190505b50905060005b82518110156107de576107bf848483815181106107b257fe5b6020026020010151611938565b8282815181106107cb57fe5b6020908102919091010152600101610799565b5092915050565b6107ed6116b6565b6107f56116cf565b61055681611963565b600080600061080b6119e1565b1592506108166119fe565b9150610820611a22565b9050909192565b60006108316116b6565b610839611760565b835161084481611a46565b610853834211156101fc61052b565b61086660008760800151116101fe61052b565b60006108758760400151611a78565b905060006108868860600151611a78565b90506108a9816001600160a01b0316836001600160a01b031614156101fd61052b565b6108b1614c58565b885160808201526020890151819060018111156108ca57fe5b908160018111156108d757fe5b9052506001600160a01b03808416602083015282811660408084019190915260808b0151606084015260a08b01516101008401528951821660c08401528901511660e082015260008061092983611a9d565b9198509250905061096060008c60200151600181111561094557fe5b146109535789831115610958565b898210155b6101fb61052b565b6109788b60400151838c600001518d60200151611b91565b6109908b60600151828c604001518d60600151611c6f565b6109b26109a08c6040015161186f565b6109ab5760006109ad565b825b611915565b5050505050506109c0611759565b949350505050565b6109d06116b6565b6109d8611760565b6109e483518351611d49565b606083516001600160401b03811180156109fd57600080fd5b50604051908082528060200260200182016040528015610a27578160200160208202803683370190505b509050606084516001600160401b0381118015610a4357600080fd5b50604051908082528060200260200182016040528015610a6d578160200160208202803683370190505b5090506000805b8651811015610be6576000878281518110610a8b57fe5b602002602001015190506000878381518110610aa357fe5b60200260200101519050610aee846001600160a01b0316836001600160a01b03161160006001600160a01b0316846001600160a01b031614610ae6576066610ae9565b60685b61052b565b819350816001600160a01b03166370a08231306040518263ffffffff1660e01b8152600401610b1d9190615ab1565b60206040518083038186803b158015610b3557600080fd5b505afa158015610b49573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610b6d91906158d1565b858481518110610b7957fe5b602002602001018181525050610b8e81611d56565b868481518110610b9a57fe5b602002602001018181525050610bc881868581518110610bb657fe5b6020026020010151101561021061052b565b610bdc6001600160a01b0383168b83611ddd565b5050600101610a74565b5060405163f04f270760e01b81526001600160a01b0388169063f04f270790610c19908990899088908a90600401615bd3565b600060405180830381600087803b158015610c3357600080fd5b505af1158015610c47573d6000803e3d6000fd5b5050505060005b8651811015610db8576000878281518110610c6557fe5b602002602001015190506000848381518110610c7d57fe5b602002602001015190506000826001600160a01b03166370a08231306040518263ffffffff1660e01b8152600401610cb59190615ab1565b60206040518083038186803b158015610ccd57600080fd5b505afa158015610ce1573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610d0591906158d1565b9050610d168282101561020361052b565b60008282039050610d3f888681518110610d2c57fe5b602002602001015182101561025a61052b565b610d498482611e33565b836001600160a01b03168c6001600160a01b03167f0d7d75e01ab95780d3cd1c8ec0dd6c2ce19e3a20427eec8bf53283b6fb8e95f08c8881518110610d8a57fe5b602002602001015184604051610da1929190615d9b565b60405180910390a350505050806001019050610c4e565b50505050610dc4611759565b50505050565b610dd26116b6565b610dda611760565b82610de481611e55565b610df083518351611d49565b60005b8351811015610e8e576000848281518110610e0a57fe5b60200260200101519050610e3660006001600160a01b0316826001600160a01b0316141561013561052b565b838281518110610e4257fe5b6020908102919091018101516000888152600a835260408082206001600160a01b0395861683529093529190912080546001600160a01b03191692909116919091179055600101610df3565b506000610e9a85611e86565b90506002816002811115610eaa57fe5b1415610ef857610ec0845160021461020c61052b565b610ef38585600081518110610ed157fe5b602002602001015186600181518110610ee657fe5b6020026020010151611ea0565b610f20565b6001816002811115610f0657fe5b1415610f1657610ef38585611f4c565b610f208585611fa4565b847ff5847d3f2197b16cdcd2098ec95d0905cd1abdaf415f07bb7cef2bba8ac5dec48585604051610f52929190615b3b565b60405180910390a25050610f64611759565b505050565b610f716116b6565b610f79611760565b81610f8381611e55565b6000610f8e84611e86565b90506002816002811115610f9e57fe5b1415610fec57610fb4835160021461020c61052b565b610fe78484600081518110610fc557fe5b602002602001015185600181518110610fda57fe5b6020026020010151611ff9565b611014565b6001816002811115610ffa57fe5b141561100a57610fe78484612067565b6110148484612121565b60005b835181101561107a57600a6000868152602001908152602001600020600085838151811061104157fe5b6020908102919091018101516001600160a01b0316825281019190915260400160002080546001600160a01b0319169055600101611017565b50837f7dcdc6d02ef40c7c1a7046a011b058bd7f988fa14e20a66344f9d4e60657d610846040516110ab9190615b28565b60405180910390a25050610539611759565b60007f0000000000000000000000000000000000000000000000000000000000000000826040516020016110f2929190615a2b565b604051602081830303815290604052805190602001209050919050565b610dc4600185858561112086612184565b612190565b6001600160a01b031660009081526002602052604090205490565b606061114a6116b6565b611152611760565b835161115d81611a46565b61116c834211156101fc61052b565b61117886518551611d49565b6111848787878b612316565b91506000805b87518110156112565760008882815181106111a157fe5b6020026020010151905060008583815181106111b957fe5b602002602001015190506111e58884815181106111d257fe5b60200260200101518213156101fb61052b565b600081131561122557885160208a015182916112049185918491611b91565b61120d8361186f565b1561121f5761121c858261187c565b94505b5061124c565b600081121561124c57600081600003905061124a83828c604001518d60600151611c6f565b505b505060010161118a565b5061126081611915565b505061126a611759565b9695505050505050565b60035461010090046001600160a01b031690565b6000611292610506565b905090565b600080600080856112a7816125a4565b6000806112b389611e86565b905060028160028111156112c357fe5b14156112da576112d389896125c2565b9150611305565b60018160028111156112e857fe5b14156112f8576112d3898961263c565b61130289896126aa565b91505b61130e826126c2565b9650611319826126ce565b9550611324826126dd565b6000998a52600a60209081526040808c206001600160a01b039b8c168d5290915290992054969995989796909616955050505050565b611362611760565b610dc4600085858561112086612184565b7f000000000000000000000000000000000000000000000000000000000000000090565b61139f6116b6565b6113a7611760565b6113af614ca8565b60005b82518110156114a9578281815181106113c757fe5b602002602001015191506000826020015190506113e3816125a4565b60408301516113fd6113f583836126e3565b61020961052b565b6000828152600a602090815260408083206001600160a01b038581168552925290912054611430911633146101f661052b565b835160608501516000806114468487878661273f565b91509150846001600160a01b0316336001600160a01b0316877f6edcaf6241105b4c94c2efdbf3a6b12458eb3d07be3a0e81d24b13c44045fe7a8585604051611490929190615d9b565b60405180910390a45050505050508060010190506113b2565b505061055e611759565b60006112926127ae565b600080826114ca816125a4565b6114d38461284b565b6114dc85611e86565b925092505b50915091565b60603330146115a1576000306001600160a01b031660003660405161150d929190615a43565b6000604051808303816000865af19150503d806000811461154a576040519150601f19603f3d011682016040523d82523d6000602084013e61154f565b606091505b50509050806000811461155e57fe5b60046000803e6000516001600160e01b031916637d30e60960e11b8114611589573d6000803e3d6000fd5b50602060005260043d0380600460203e602081016000f35b60606115af85858589612316565b9050602081510263fa61cc126020830352600482036024820181fd5b6060806000836115da816125a4565b60606115e586612851565b90955090506115f3816128b3565b95979096509350505050565b6116076116b6565b61160f611760565b8261161981611a46565b6001600160a01b0384811660008181526004602090815260408083209488168084529490915290819020805460ff1916861515179055519091907f46961fdb4502b646d5095fba7600486a8ac05041d55cdf0f16ed677180b5cad890611680908690615c69565b60405180910390a350610f64611759565b600061169d8383612961565b90505b92915050565b61055e816210905360ea1b61298f565b6116c86002600054141561019061052b565b6002600055565b60006116e66000356001600160e01b0319166110bd565b905061055e6116f582336129f0565b61019161052b565b6040516001600160a01b038216907f94b979b6831a51293e2641426f97747feed46f17779fed9cd18d1ecefcfe92ef90600090a2600380546001600160a01b0390921661010002610100600160a81b0319909216919091179055565b6001600055565b61177361176b6119e1565b61019261052b565b565b600069ffffffffffffffffffff8216605084600281111561179257fe5b901b17606085901b6bffffffffffffffffffffffff19161790505b9392505050565b600080600080600080600088606001519050336001600160a01b0316816001600160a01b03161461180657876117f1576117ec6116cf565b600197505b6118066117fe8233612961565b6101f761052b565b885160208a015160408b01516080909b0151919b909a9992985090965090945092505050565b6118418361183986611a78565b836000612a7a565b50610dc48482846000611c6f565b6118628261185c86611a78565b83612ad0565b610dc48482856000611b91565b6001600160a01b03161590565b600082820161169d848210158361052b565b61189b8385836000612a7a565b50610dc4828583612ad0565b8015610dc4576118c26001600160a01b038516848484612b00565b826001600160a01b0316846001600160a01b03167f540a1a3f28340caec336c81d8d7b3df139ee5cdc1839a4f283d7ebb7eaae2d5c8484604051611907929190615b0f565b60405180910390a350505050565b6119248134101561020461052b565b348190038015610539576105393382612b21565b6001600160a01b039182166000908152600b6020908152604080832093909416825291909152205490565b80156119835761197e6119746119fe565b421061019361052b565b611998565b61199861198e611a22565b42106101a961052b565b6003805460ff19168215151790556040517f9e3a5e37224532dea67b89face185703738a228a6e8a23dee546960180d3be64906119d6908390615c69565b60405180910390a150565b60006119eb611a22565b42118061129257505060035460ff161590565b7f000000000000000000000000000000000000000000000000000000000000000090565b7f000000000000000000000000000000000000000000000000000000000000000090565b336001600160a01b0382161461055e57611a5e6116cf565b611a688133612961565b61055e5761055e816101f7612b9b565b6000611a838261186f565b611a9557611a9082610528565b6116a0565b6116a0610506565b600080600080611ab0856080015161284b565b90506000611ac18660800151611e86565b90506002816002811115611ad157fe5b1415611ae857611ae18683612c1c565b9450611b13565b6001816002811115611af657fe5b1415611b0657611ae18683612ccc565b611b108683612d5f565b94505b611b268660000151876060015187612f83565b809450819550505085604001516001600160a01b031686602001516001600160a01b031687608001517f2170c741c41531aec20e7c107c24eecfdd15e69c9bb0a8dd37b1840b9e0b207b8787604051611b80929190615d9b565b60405180910390a450509193909250565b82611b9b57610dc4565b611ba48461186f565b15611c2557611bb6811561020261052b565b611bc58347101561020461052b565b611bcd610506565b6001600160a01b031663d0e30db0846040518263ffffffff1660e01b81526004016000604051808303818588803b158015611c0757600080fd5b505af1158015611c1b573d6000803e3d6000fd5b5050505050610dc4565b6000611c3085610528565b90508115611c4d576000611c478483876001612a7a565b90940393505b8315611c6857611c686001600160a01b038216843087612b00565b5050505050565b82611c7957610dc4565b611c828461186f565b15611d1257611c94811561020261052b565b611c9c610506565b6001600160a01b0316632e1a7d4d846040518263ffffffff1660e01b8152600401611cc79190615c8c565b600060405180830381600087803b158015611ce157600080fd5b505af1158015611cf5573d6000803e3d6000fd5b50611d0d925050506001600160a01b03831684612b21565b610dc4565b6000611d1d85610528565b90508115611d3557611d30838286612ad0565b611c68565b611c686001600160a01b0382168486611ddd565b610539818314606761052b565b600080611d61611373565b6001600160a01b031663d877845c6040518163ffffffff1660e01b815260040160206040518083038186803b158015611d9957600080fd5b505afa158015611dad573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190611dd191906158d1565b90506117ad8382612fb1565b610f648363a9059cbb60e01b8484604051602401611dfc929190615b0f565b60408051601f198184030181529190526020810180516001600160e01b03166001600160e01b031990931692909217909152612ff3565b801561053957610539611e44611373565b6001600160a01b0384169083611ddd565b611e5e816125a4565b61055e611e6a8261284b565b6001600160a01b0316336001600160a01b0316146101f561052b565b600061ffff605083901c166116a0600382106101f461052b565b611ec1816001600160a01b0316836001600160a01b0316141561020a61052b565b611ee0816001600160a01b0316836001600160a01b031610606661052b565b60008381526009602052604090208054611f1d906001600160a01b0316158015611f15575060018201546001600160a01b0316155b61020b61052b565b80546001600160a01b039384166001600160a01b03199182161782556001909101805492909316911617905550565b6000828152600860205260408120905b8251811015610dc4576000611f8d848381518110611f7657fe5b60200260200101518461309390919063ffffffff16565b9050611f9b8161020a61052b565b50600101611f5c565b6000828152600160205260408120905b8251811015610dc4576000611fe2848381518110611fce57fe5b6020908102919091010151849060006130f6565b9050611ff08161020a61052b565b50600101611fb4565b60008060006120098686866131a3565b92509250925061203361201b8461326a565b801561202b575061202b8361326a565b61020d61052b565b600095865260096020526040862080546001600160a01b031990811682556001909101805490911690559490945550505050565b6000828152600860205260408120905b8251811015610dc457600083828151811061208e57fe5b602002602001015190506120da61202b600760008881526020019081526020016000206000846001600160a01b03166001600160a01b031681526020019081526020016000205461326a565b60008581526007602090815260408083206001600160a01b038516845290915281208190556121098483613277565b90506121178161020961052b565b5050600101612077565b6000828152600160205260408120905b8251811015610dc457600083828151811061214857fe5b60200260200101519050600061215e8483613385565b905061216c61202b8261326a565b6121768483613394565b505050806001019050612131565b61218c614cd1565b5090565b6121986116b6565b836121a2816125a4565b836121ac81611a46565b6121c0836000015151846020015151611d49565b60606121cf8460000151613466565b905060606121dd88836134f4565b905060608060606121f28c8c8c8c8c89613585565b92509250925060006122038c611e86565b9050600281600281111561221357fe5b141561227b576122768c8760008151811061222a57fe5b60200260200101518660008151811061223f57fe5b60200260200101518960018151811061225457fe5b60200260200101518860018151811061226957fe5b602002602001015161374a565b6122a4565b600181600281111561228957fe5b141561229a576122768c8786613789565b6122a48c856137f6565b6000808e60018111156122b357fe5b1490508b6001600160a01b03168d7fe5ce249087ce04f05a957192435400fd97868dba0e6a4b4c049abf8af80dae78896122ed888661383f565b876040516122fd93929190615b9a565b60405180910390a3505050505050505050611c68611759565b606083516001600160401b038111801561232f57600080fd5b50604051908082528060200260200182016040528015612359578160200160208202803683370190505b509050612364614cfb565b61236c614c58565b60008060005b89518110156125975789818151811061238757fe5b602002602001015194506000895186602001511080156123ab575089518660400151105b90506123b881606461052b565b60006123da8b8860200151815181106123cd57fe5b6020026020010151611a78565b905060006123f18c8960400151815181106123cd57fe5b9050612414816001600160a01b0316836001600160a01b031614156101fd61052b565b60608801516124645761242c600085116101fe61052b565b60006124398b84846138e6565b6001600160a01b0316876001600160a01b031614905061245b816101ff61052b565b50606088018590525b87516080880152868a600181111561247857fe5b9081600181111561248557fe5b9052506001600160a01b0380831660208901528181166040808a01919091526060808b0151908a015260808a01516101008a01528c51821660c08a01528c01511660e08801526000806124d789611a9d565b919850925090506124e98c8585613908565b975061251d6124f783613922565b8c8c602001518151811061250757fe5b602002602001015161393590919063ffffffff16565b8b8b602001518151811061252d57fe5b60200260200101818152505061256b61254582613922565b8c8c604001518151811061255557fe5b602002602001015161396990919063ffffffff16565b8b8b604001518151811061257b57fe5b6020026020010181815250505050505050806001019050612372565b5050505050949350505050565b60008181526005602052604090205461055e9060ff166101f461052b565b60008060008060006125d38761399d565b945094509450945050836001600160a01b0316866001600160a01b0316141561260257829450505050506116a0565b816001600160a01b0316866001600160a01b031614156126275793506116a092505050565b6126326102096116a6565b5050505092915050565b60008281526007602090815260408083206001600160a01b03851684529091528120548161266982613a13565b80612687575060008581526008602052604090206126879085613a25565b9050806126a257612697856125a4565b6126a26102096116a6565b509392505050565b60008281526001602052604081206109c08184613385565b6001600160701b031690565b60701c6001600160701b031690565b60e01c90565b6000806126ef84611e86565b905060028160028111156126ff57fe5b14156127175761270f8484613a46565b9150506116a0565b600181600281111561272557fe5b14156127355761270f8484613a97565b61270f8484613aaf565b600080600061274d86611e86565b9050600087600281111561275d57fe5b14156127795761276f86828787613ac7565b92509250506127a5565b600187600281111561278757fe5b14156127995761276f86828787613b42565b61276f86828787613bbe565b94509492505050565b60007f00000000000000000000000000000000000000000000000000000000000000007f00000000000000000000000000000000000000000000000000000000000000007f000000000000000000000000000000000000000000000000000000000000000061281b613c21565b30604051602001612830959493929190615d3e565b60405160208183030381529060405280519060200120905090565b60601c90565b606080600061285f84611e86565b9050600281600281111561286f57fe5b14156128885761287e84613c25565b92509250506128ae565b600181600281111561289657fe5b14156128a55761287e84613d5a565b61287e84613e7f565b915091565b6060600082516001600160401b03811180156128ce57600080fd5b506040519080825280602002602001820160405280156128f8578160200160208202803683370190505b5091506000905060005b82518110156114e157600084828151811061291957fe5b6020026020010151905061292c81613f79565b84838151811061293857fe5b60200260200101818152505061295683612951836126dd565b613f94565b925050600101612902565b6001600160a01b03918216600090815260046020908152604080832093909416825291909152205460ff1690565b62461bcd60e51b600090815260206004526007602452600a808404818106603090810160081b958390069590950190829004918206850160101b01602363ffffff0060e086901c160160181b0190930160c81b60445260e882901c90606490fd5b6003546040516326f8aa2160e21b815260009161010090046001600160a01b031690639be2a88490612a2a90869086903090600401615c95565b60206040518083038186803b158015612a4257600080fd5b505afa158015612a56573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061169d91906153e8565b600080612a878686611938565b9050612aa08380612a985750848210155b61020161052b565b612aaa8185613fa0565b9150818103612ac6878783612abe87613922565b600003613fac565b5050949350505050565b6000612adc8484611938565b90506000612aea828461187c565b9050611c68858583612afb87613922565b613fac565b610dc4846323b872dd60e01b858585604051602401611dfc93929190615ac5565b612b30814710156101a361052b565b6000826001600160a01b031682604051612b4990610528565b60006040518083038185875af1925050503d8060008114612b86576040519150601f19603f3d011682016040523d82523d6000602084013e612b8b565b606091505b50509050610f64816101a461052b565b6000612ba5614007565b9050612bb38115158361052b565b6000612bbd614118565b9050600082612bca614124565b8051906020012033612bdb88611125565b85604051602001612bf0959493929190615d12565b604051602081830303815290604052805190602001209050611c688582612c15614173565b85886141b2565b600080600080612c398660800151876020015188604001516131a3565b92509250925060008087604001516001600160a01b031688602001516001600160a01b03161015612c6e575083905082612c74565b50829050835b612c8088888484614209565b60408b015160208c01519199509294509092506001600160a01b03918216911610612cb457612caf8183614306565b612cbe565b612cbe8282614306565b909255509295945050505050565b600080612ce18460800151856020015161263c565b90506000612cf78560800151866040015161263c565b9050612d0585858484614209565b6080880180516000908152600760208181526040808420828e01516001600160a01b03908116865290835281852098909855935183529081528282209a830151909516815298909352919096209590955550929392505050565b60808201516000908152600160209081526040822090840151829182918290612d89908390614341565b90506000612da488604001518461434190919063ffffffff16565b9050811580612db1575080155b15612dce57612dc388608001516125a4565b612dce6102096116a6565b60001991820191016000612de184614360565b90506060816001600160401b0381118015612dfb57600080fd5b50604051908082528060200260200182016040528015612e25578160200160208202803683370190505b50600060a08c018190529091505b82811015612ea5576000612e478783614364565b9050612e5281613f79565b838381518110612e5e57fe5b602002602001018181525050612e7b8c60a00151612951836126dd565b60a08d015281861415612e9057809850612e9c565b84821415612e9c578097505b50600101612e33565b5060405162f64aa560e11b81526001600160a01b038a16906301ec954a90612ed7908d90859089908990600401615da9565b602060405180830381600087803b158015612ef157600080fd5b505af1158015612f05573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190612f2991906158d1565b9750600080612f418c600001518d606001518c612f83565b9092509050612f50898361437a565b9850612f5c88826143ab565b9750612f6987878b6143c1565b612f7487868a6143c1565b50505050505050505092915050565b60008080856001811115612f9357fe5b1415612fa3575082905081612fa9565b50819050825b935093915050565b6000828202612fd5841580612fce575083858381612fcb57fe5b04145b600361052b565b6001670de0b6b3a76400006001830304018115150291505092915050565b60006060836001600160a01b03168360405161300f9190615a53565b6000604051808303816000865af19150503d806000811461304c576040519150601f19603f3d011682016040523d82523d6000602084013e613051565b606091505b50915091506000821415613069573d6000803e3d6000fd5b610dc481516000148061308b57508180602001905181019061308b91906153e8565b6101a261052b565b600061309f8383613a25565b6130ee57508154600180820184556000848152602080822090930180546001600160a01b0319166001600160a01b038616908117909155855490825282860190935260409020919091556116a0565b5060006116a0565b6001600160a01b03821660009081526002840160205260408120548061318357505082546040805180820182526001600160a01b03858116808352602080840187815260008781526001808c018452878220965187546001600160a01b031916961695909517865590519484019490945594820180895590835260028801909452919020919091556117ad565b6000190160009081526001808601602052604082200183905590506117ad565b60008060008060006131b587876143d9565b9150915060006131c5838361440a565b60008a8152600960209081526040808320848452600201909152812080546001820154919750929350906131f883613a13565b80613207575061320782613a13565b8061322857506132178c87613a46565b801561322857506132288c86613a46565b905080613243576132388c6125a4565b6132436102096116a6565b61324d838361443d565b98506132598383614462565b975050505050505093509350939050565b6001600160e01b03161590565b6001600160a01b0381166000908152600183016020526040812054801561337b57835460001980830191018082146133235760008660000182815481106132ba57fe5b60009182526020909120015487546001600160a01b03909116915081908890859081106132e357fe5b600091825260208083209190910180546001600160a01b0319166001600160a01b0394851617905592909116815260018881019092526040902090830190555b855486908061332e57fe5b60008281526020808220830160001990810180546001600160a01b03191690559092019092556001600160a01b03871682526001888101909152604082209190915593506116a092505050565b60009150506116a0565b600061169d8383610209614479565b6001600160a01b0381166000908152600283016020526040812054801561337b578354600019808301910180821461341c576000818152600180880160209081526040808420868552818520815481546001600160a01b0319166001600160a01b039182161782558286015491860191909155905416845260028a0190915290912090830190555b600081815260018088016020908152604080842080546001600160a01b031916815583018490559389556001600160a01b03881683526002890190529181205592506116a0915050565b60608082516001600160401b038111801561348057600080fd5b506040519080825280602002602001820160405280156134aa578160200160208202803683370190505b50905060005b83518110156107de576134c88482815181106123cd57fe5b8282815181106134d457fe5b6001600160a01b03909216602092830291909101909101526001016134b0565b606080606061350285612851565b9150915061351282518551611d49565b613522600083511161020f61052b565b60005b825181101561357c5761357485828151811061353d57fe5b60200260200101516001600160a01b031684838151811061355a57fe5b60200260200101516001600160a01b03161461020861052b565b600101613525565b50949350505050565b6060806060806000613596866128b3565b9150915060006135a58b61284b565b905060008c60018111156135b557fe5b1461365857806001600160a01b03166374f3b0098c8c8c87876135d66144b6565b8f604001516040518863ffffffff1660e01b81526004016135fd9796959493929190615cb4565b600060405180830381600087803b15801561361757600080fd5b505af115801561362b573d6000803e3d6000fd5b505050506040513d6000823e601f3d908101601f191682016040526136539190810190615376565b6136f1565b806001600160a01b031663d5c096c48c8c8c87876136746144b6565b8f604001516040518863ffffffff1660e01b815260040161369b9796959493929190615cb4565b600060405180830381600087803b1580156136b557600080fd5b505af11580156136c9573d6000803e3d6000fd5b505050506040513d6000823e601f3d908101601f191682016040526136f19190810190615376565b8095508196505050613707875186518651614530565b60008c600181111561371557fe5b1461372c576137278989898888614548565b613739565b6137398a8989888861468e565b955050505096509650969350505050565b6000613756858461440a565b6000878152600960209081526040808320848452600201909152902090915061377f8584614306565b9055505050505050565b60005b8251811015610dc4578181815181106137a157fe5b60200260200101516007600086815260200190815260200160002060008584815181106137ca57fe5b6020908102919091018101516001600160a01b031682528101919091526040016000205560010161378c565b6000828152600160205260408120905b8251811015610dc4576138378184838151811061381f57fe5b6020026020010151846143c19092919063ffffffff16565b600101613806565b606082516001600160401b038111801561385857600080fd5b50604051908082528060200260200182016040528015613882578160200160208202803683370190505b50905060005b83518110156107de57826138b2578381815181106138a257fe5b60200260200101516000036138c7565b8381815181106138be57fe5b60200260200101515b8282815181106138d357fe5b6020908102919091010152600101613888565b6000808460018111156138f557fe5b1461390057816109c0565b509092915050565b60008084600181111561391757fe5b146107de57826109c0565b600061218c60ff83901c156101a561052b565b600082820161169d82841280159061394d5750848212155b80613962575060008412801561396257508482125b600061052b565b600081830361169d8284128015906139815750848213155b80613996575060008412801561399657508482135b600161052b565b6000818152600960205260408120805460018201546001600160a01b03918216928492909116908290816139d1868561440a565b60008181526002840160205260409020805460018201549199509192506139f8828261443d565b9650613a048282614462565b94505050505091939590929450565b6000613a1e8261326a565b1592915050565b6001600160a01b031660009081526001919091016020526040902054151590565b600082815260096020526040812080546001600160a01b0384811691161480613a7e575060018101546001600160a01b038481169116145b80156109c0575050506001600160a01b03161515919050565b60008281526008602052604081206109c08184613a25565b60008281526001602052604081206109c08184614803565b6000806002856002811115613ad857fe5b1415613aee57613ae9868585614824565b613b18565b6001856002811115613afc57fe5b1415613b0d57613ae9868585614832565b613b18868585614840565b8215613b3257613b326001600160a01b0385163385611ddd565b5050600081900394909350915050565b6000806002856002811115613b5357fe5b1415613b6957613b6486858561484e565b613b93565b6001856002811115613b7757fe5b1415613b8857613b6486858561485c565b613b9386858561486a565b8215613bae57613bae6001600160a01b038516333086612b00565b5090946000869003945092505050565b6000806002856002811115613bcf57fe5b1415613be757613be0868585614878565b9050613c14565b6001856002811115613bf557fe5b1415613c0657613be0868585614888565b613c11868585614898565b90505b6000915094509492505050565b4690565b606080600080600080613c378761399d565b92975090955093509150506001600160a01b0384161580613c5f57506001600160a01b038216155b15613c8857505060408051600080825260208201908152818301909252945092506128ae915050565b60408051600280825260608201835290916020830190803683370190505095508386600081518110613cb657fe5b60200260200101906001600160a01b031690816001600160a01b0316815250508186600181518110613ce457fe5b6001600160a01b03929092166020928302919091018201526040805160028082526060820183529092909190830190803683370190505094508285600081518110613d2b57fe5b6020026020010181815250508085600181518110613d4557fe5b60200260200101818152505050505050915091565b60008181526008602052604090206060908190613d7681614360565b6001600160401b0381118015613d8b57600080fd5b50604051908082528060200260200182016040528015613db5578160200160208202803683370190505b50925082516001600160401b0381118015613dcf57600080fd5b50604051908082528060200260200182016040528015613df9578160200160208202803683370190505b50915060005b8351811015613e78576000613e1483836148a8565b905080858381518110613e2357fe5b6001600160a01b03928316602091820292909201810191909152600088815260078252604080822093851682529290915220548451859084908110613e6457fe5b602090810291909101015250600101613dff565b5050915091565b60008181526001602052604090206060908190613e9b81614360565b6001600160401b0381118015613eb057600080fd5b50604051908082528060200260200182016040528015613eda578160200160208202803683370190505b50925082516001600160401b0381118015613ef457600080fd5b50604051908082528060200260200182016040528015613f1e578160200160208202803683370190505b50915060005b8351811015613e7857613f3782826148d5565b858381518110613f4357fe5b60200260200101858481518110613f5657fe5b60209081029190910101919091526001600160a01b039091169052600101613f24565b6000613f84826126ce565b613f8d836126c2565b0192915050565b80820390821002900390565b80820390821102900390565b6001600160a01b038085166000818152600b602090815260408083209488168084529490915290819020859055517f18e1ea4139e68413d7d08aa752e71568e36b2c5bf940893314c2c5b01eaa0c4290611907908590615c8c565b6000803560e01c8063b95cac28811461404f57638bdb39138114614077576352bbbe29811461409f5763945bcec981146140c75763fa6e671d81146140ef5760009250614113565b7f3f7b71252bd19113ff48c19c6e004a9bcfcca320a0d74d58e85877cbd7dcae589250614113565b7f8bbc57f66ea936902f50a71ce12b92c43f3c5340bb40c27c4e90ab84eeae33539250614113565b7fe192dcbc143b1e244ad73b813fd3c097b832ad260a157340b4e5e5beda067abe9250614113565b7f9bfc43a4d98313c6766986ffd7c916c7481566d9f224c6819af0a53388aced3a9250614113565b7fa3f865aa351e51cfeb40f5178d1564bb629fe9030b83caf6361d1baaf5b90b5a92505b505090565b600061129260006148f9565b60606000368080601f0160208091040260200160405190810160405280939291908181526020018383808284376000920191909152505082519293505050608010156105285760803603815290565b6060600061418160206148f9565b9050600061418f60406148f9565b9050600061419d60606148f9565b90506141aa838383614903565b935050505090565b60006141bd85614942565b90506141d36141cd87838761495e565b8361052b565b6141e2428410156101b861052b565b5050506001600160a01b039092166000908152600260205260409020805460010190555050565b60008060008061421886613f79565b9050600061422586613f79565b905061423c614233886126dd565b612951886126dd565b60a08a015260405163274b044360e21b81526001600160a01b03891690639d2c110c90614271908c9086908690600401615de2565b602060405180830381600087803b15801561428b57600080fd5b505af115801561429f573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906142c391906158d1565b92506000806142db8b600001518c6060015187612f83565b90925090506142ea898361437a565b96506142f688826143ab565b9550505050509450945094915050565b60008061431e614315856126dd565b612951856126dd565b90506109c061432c856126c2565b614335856126c2565b8363ffffffff16614a0d565b6001600160a01b03166000908152600291909101602052604090205490565b5490565b6000908152600191820160205260409020015490565b6000806143908361438a866126c2565b9061187c565b9050600061439d856126ce565b90504361126a838383614a1b565b600080614390836143bb866126c2565b90614a49565b60009182526001928301602052604090912090910155565b600080826001600160a01b0316846001600160a01b0316106143fc5782846143ff565b83835b915091509250929050565b6000828260405160200161441f929190615a6f565b60405160208183030381529060405280519060200120905092915050565b600061169d61444b846126c2565b614454846126c2565b61445d866126dd565b614a1b565b600061169d614470846126ce565b614454846126ce565b6001600160a01b03821660009081526002840160205260408120546144a08115158461052b565b6144ad8560018303614364565b95945050505050565b60006144c0611373565b6001600160a01b03166355c676286040518163ffffffff1660e01b815260040160206040518083038186803b1580156144f857600080fd5b505afa15801561450c573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061129291906158d1565b610f64828414801561454157508183145b606761052b565b606083516001600160401b038111801561456157600080fd5b5060405190808252806020026020018201604052801561458b578160200160208202803683370190505b50905060005b8551518110156146845760008482815181106145a957fe5b602002602001015190506145d9876020015183815181106145c657fe5b60200260200101518210156101f961052b565b6000876000015183815181106145eb57fe5b6020026020010151905061460581838b8b60600151611c6f565b600085848151811061461357fe5b6020026020010151905061462f61462983611a78565b82611e33565b61465e61463c848361187c565b89868151811061464857fe5b60200260200101516143ab90919063ffffffff16565b85858151811061466a57fe5b602002602001018181525050505050806001019050614591565b5095945050505050565b6060600084516001600160401b03811180156146a957600080fd5b506040519080825280602002602001820160405280156146d3578160200160208202803683370190505b50915060005b8651518110156147f95760008582815181106146f157fe5b602002602001015190506147218860200151838151811061470e57fe5b60200260200101518211156101fa61052b565b60008860000151838151811061473357fe5b6020026020010151905061474d81838c8c60600151611b91565b6147568161186f565b1561476857614765848361187c565b93505b600086848151811061477657fe5b6020026020010151905061478c61462983611a78565b808310156147ab576147a68382038a868151811061464857fe5b6147d3565b6147d38184038a86815181106147bd57fe5b602002602001015161437a90919063ffffffff16565b8685815181106147df57fe5b6020026020010181815250505050508060010190506146d9565b5061468481611915565b6001600160a01b031660009081526002919091016020526040902054151590565b610dc48383614a5f84614a9a565b610dc48383614a5f84614b45565b610dc48383614a5f84614ba0565b610dc48383614be384614a9a565b610dc48383614be384614b45565b610dc48383614be384614ba0565b60006109c08484614c0485614a9a565b60006109c08484614c0485614b45565b60006109c08484614c0485614ba0565b60008260000182815481106148b957fe5b6000918252602090912001546001600160a01b03169392505050565b600090815260019182016020526040902080549101546001600160a01b0390911691565b3601607f19013590565b60408051604180825260808201909252606091829190602082018180368337019050509050836020820152826040820152846060820153949350505050565b600061494c6127ae565b826040516020016110f2929190615a96565b600061497082516041146101b961052b565b60208281015160408085015160608601518251600080825295019283905292939092811a916001906149a9908990859088908890615d6a565b6020604051602081039080840390855afa1580156149cb573d6000803e3d6000fd5b5050604051601f1901519150506001600160a01b03811615801590614a015750876001600160a01b0316816001600160a01b0316145b98975050505050505050565b60e01b60709190911b010190565b6000838301614a3e858210801590614a365750600160701b82105b61020e61052b565b6144ad858585614a0d565b6000614a5983831115600161052b565b50900390565b600080614a6f836143bb866126c2565b90506000614a808461438a876126ce565b90506000614a8d866126dd565b905061126a838383614a1b565b6000806000806000614aab8961399d565b9450509350935093506000836001600160a01b0316896001600160a01b03161415614af6576000614ae084898b63ffffffff16565b9050614aec8185614c1e565b9093509050614b18565b6000614b0683898b63ffffffff16565b9050614b128184614c1e565b90925090505b614b228383614306565b8555614b2e8383614c3a565b600190950194909455509192505050949350505050565b600080614b52868661263c565b90506000614b6482858763ffffffff16565b60008881526007602090815260408083206001600160a01b038b16845290915290208190559050614b958183614c1e565b979650505050505050565b600084815260016020526040812081614bb98287613385565b90506000614bcb82868863ffffffff16565b9050614bd88388836130f6565b50614a018183614c1e565b600080614bf38361438a866126c2565b90506000614a80846143bb876126ce565b600080614c10846126c2565b9050436144ad828583614a1b565b6000614c29826126ce565b614c32846126ce565b039392505050565b600061169d614c48846126ce565b614c51846126ce565b6000614a0d565b60408051610120810190915280600081526000602082018190526040820181905260608083018290526080830182905260a0830182905260c0830182905260e08301919091526101009091015290565b604080516080810190915280600081526000602082018190526040820181905260609091015290565b60405180608001604052806060815260200160608152602001606081526020016000151581525090565b6040518060a0016040528060008019168152602001600081526020016000815260200160008152602001606081525090565b80356116a081615ea6565b600082601f830112614d48578081fd5b8135614d5b614d5682615e51565b615e2b565b818152915060208083019084810181840286018201871015614d7c57600080fd5b60005b84811015614da4578135614d9281615ea6565b84529282019290820190600101614d7f565b505050505092915050565b600082601f830112614dbf578081fd5b8135614dcd614d5682615e51565b818152915060208083019084810160005b84811015614da4578135870160a080601f19838c03011215614dff57600080fd5b614e0881615e2b565b8583013581526040808401358783015260608085013582840152608091508185013581840152508284013592506001600160401b03831115614e4957600080fd5b614e578c8885870101614f36565b90820152865250509282019290820190600101614dde565b600082601f830112614e7f578081fd5b8135614e8d614d5682615e51565b818152915060208083019084810181840286018201871015614eae57600080fd5b60005b84811015614da457813584529282019290820190600101614eb1565b600082601f830112614edd578081fd5b8151614eeb614d5682615e51565b818152915060208083019084810181840286018201871015614f0c57600080fd5b60005b84811015614da457815184529282019290820190600101614f0f565b80356116a081615ebb565b600082601f830112614f46578081fd5b81356001600160401b03811115614f5b578182fd5b614f6e601f8201601f1916602001615e2b565b9150808252836020828501011115614f8557600080fd5b8060208401602084013760009082016020015292915050565b80356116a081615ec9565b8035600281106116a057600080fd5b8035600481106116a057600080fd5b600060808284031215614fd8578081fd5b614fe26080615e2b565b905081356001600160401b0380821115614ffb57600080fd5b61500785838601614d38565b8352602084013591508082111561501d57600080fd5b61502985838601614e6f565b6020840152604084013591508082111561504257600080fd5b5061504f84828501614f36565b6040830152506150628360608401614f2b565b606082015292915050565b60006080828403121561507e578081fd5b6150886080615e2b565b9050813561509581615ea6565b815260208201356150a581615ebb565b602082015260408201356150b881615ea6565b6040820152606082013561506281615ebb565b6000602082840312156150dc578081fd5b813561169d81615ea6565b600080604083850312156150f9578081fd5b823561510481615ea6565b9150602083013561511481615ea6565b809150509250929050565b600080600060608486031215615133578081fd5b833561513e81615ea6565b9250602084013561514e81615ea6565b9150604084013561515e81615ebb565b809150509250925092565b6000806040838503121561517b578182fd5b823561518681615ea6565b915060208301356001600160401b038111156151a0578182fd5b6151ac85828601614d38565b9150509250929050565b600060208083850312156151c8578182fd5b82356001600160401b038111156151dd578283fd5b8301601f810185136151ed578283fd5b80356151fb614d5682615e51565b818152838101908385016080808502860187018a1015615219578788fd5b8795505b848610156152825780828b031215615233578788fd5b61523c81615e2b565b6152468b84614f9e565b81528783013588820152604061525e8c828601614d2d565b9082015260608381013590820152845260019590950194928601929081019061521d565b509098975050505050505050565b600060208083850312156152a2578182fd5b82356001600160401b038111156152b7578283fd5b8301601f810185136152c7578283fd5b80356152d5614d5682615e51565b8181528381019083850160a0808502860187018a10156152f3578788fd5b8795505b848610156152825780828b03121561530d578788fd5b61531681615e2b565b6153208b84614fb8565b815261532e8b898501614d2d565b8189015260408381013590820152606061534a8c828601614d2d565b90820152608061535c8c858301614d2d565b9082015284526001959095019492860192908101906152f7565b60008060408385031215615388578182fd5b82516001600160401b038082111561539e578384fd5b6153aa86838701614ecd565b935060208501519150808211156153bf578283fd5b506151ac85828601614ecd565b6000602082840312156153dd578081fd5b813561169d81615ebb565b6000602082840312156153f9578081fd5b815161169d81615ebb565b600060208284031215615415578081fd5b5035919050565b60008060008060808587031215615431578182fd5b84359350602085013561544381615ea6565b9250604085013561545381615ea6565b915060608501356001600160401b0381111561546d578182fd5b61547987828801614fc7565b91505092959194509250565b60008060408385031215615497578182fd5b8235915060208301356001600160401b038111156151a0578182fd5b6000806000606084860312156154c7578081fd5b833592506020808501356001600160401b03808211156154e5578384fd5b6154f188838901614d38565b94506040870135915080821115615506578384fd5b508501601f81018713615517578283fd5b8035615525614d5682615e51565b81815283810190838501858402850186018b1015615541578687fd5b8694505b8385101561556c57803561555881615ea6565b835260019490940193918501918501615545565b5080955050505050509250925092565b6000806040838503121561558e578182fd5b82359150602083013561511481615ea6565b6000602082840312156155b1578081fd5b81356001600160e01b03198116811461169d578182fd5b600080600080608085870312156155dd578182fd5b84356155e881615ea6565b935060208501356001600160401b0380821115615603578384fd5b61560f88838901614d38565b94506040870135915080821115615624578384fd5b61563088838901614e6f565b93506060870135915080821115615645578283fd5b5061547987828801614f36565b600060208284031215615663578081fd5b813561169d81615ec9565b60008060008060e08587031215615683578182fd5b61568d8686614fa9565b935060208501356001600160401b03808211156156a8578384fd5b6156b488838901614daf565b945060408701359150808211156156c9578384fd5b506156d687828801614d38565b9250506156e6866060870161506d565b905092959194509250565b600080600080600080610120878903121561570a578384fd5b6157148888614fa9565b95506020808801356001600160401b0380821115615730578687fd5b61573c8b838c01614daf565b975060408a0135915080821115615751578687fd5b61575d8b838c01614d38565b965061576c8b60608c0161506d565b955060e08a0135915080821115615781578485fd5b508801601f81018a13615792578384fd5b80356157a0614d5682615e51565b81815283810190838501858402850186018e10156157bc578788fd5b8794505b838510156157de5780358352600194909401939185019185016157c0565b50809650505050505061010087013590509295509295509295565b60008060008060e0858703121561580e578182fd5b84356001600160401b0380821115615824578384fd5b9086019060c08289031215615837578384fd5b61584160c0615e2b565b823581526158528960208501614fa9565b6020820152604083013561586581615ea6565b60408201526158778960608501614d2d565b60608201526080830135608082015260a083013582811115615897578586fd5b6158a38a828601614f36565b60a0830152508096505050506158bc866020870161506d565b939693955050505060a08201359160c0013590565b6000602082840312156158e2578081fd5b5051919050565b6001600160a01b03169052565b6000815180845260208085019450808401835b8381101561592e5781516001600160a01b031687529582019590820190600101615909565b509495945050505050565b6000815180845260208085019450808401835b8381101561592e5781518752958201959082019060010161594c565b60008151808452615980816020860160208601615e70565b601f01601f19169290920160200192915050565b60006101208251600281106159a557fe5b8085525060208301516159bb60208601826158e9565b5060408301516159ce60408601826158e9565b50606083015160608501526080830151608085015260a083015160a085015260c08301516159ff60c08601826158e9565b5060e0830151615a1260e08601826158e9565b5061010080840151828287015261126a83870182615968565b9182526001600160e01b031916602082015260240190565b6000828483379101908152919050565b60008251615a65818460208701615e70565b9190910192915050565b6bffffffffffffffffffffffff19606093841b811682529190921b16601482015260280190565b61190160f01b81526002810192909252602282015260420190565b6001600160a01b0391909116815260200190565b6001600160a01b039384168152919092166020820152604081019190915260600190565b6001600160a01b038316815260408101615b0283615e9c565b8260208301529392505050565b6001600160a01b03929092168252602082015260400190565b60006020825261169d60208301846158f6565b600060408252615b4e60408301856158f6565b828103602084810191909152845180835285820192820190845b81811015615b8d5784516001600160a01b031683529383019391830191600101615b68565b5090979650505050505050565b600060608252615bad60608301866158f6565b8281036020840152615bbf8186615939565b9050828103604084015261126a8185615939565b600060808252615be660808301876158f6565b8281036020840152615bf88187615939565b90508281036040840152615c0c8186615939565b90508281036060840152614b958185615968565b600060608252615c3360608301866158f6565b8281036020840152615c458186615939565b915050826040830152949350505050565b60006020825261169d6020830184615939565b901515815260200190565b92151583526020830191909152604082015260600190565b90815260200190565b9283526001600160a01b03918216602084015216604082015260600190565b8781526001600160a01b0387811660208301528616604082015260e060608201819052600090615ce690830187615939565b8560808401528460a084015282810360c0840152615d048185615968565b9a9950505050505050505050565b94855260208501939093526001600160a01b039190911660408401526060830152608082015260a00190565b9485526020850193909352604084019190915260608301526001600160a01b0316608082015260a00190565b93845260ff9290921660208401526040830152606082015260800190565b60208101615d9583615e9c565b91905290565b918252602082015260400190565b600060808252615dbc6080830187615994565b8281036020840152615dce8187615939565b604084019590955250506060015292915050565b600060608252615df56060830186615994565b60208301949094525060400152919050565b938452602084019290925260408301526001600160a01b0316606082015260800190565b6040518181016001600160401b0381118282101715615e4957600080fd5b604052919050565b60006001600160401b03821115615e66578081fd5b5060209081020190565b60005b83811015615e8b578181015183820152602001615e73565b83811115610dc45750506000910152565b6003811061055e57fe5b6001600160a01b038116811461055e57600080fd5b801515811461055e57600080fd5b6003811061055e57600080fdfea2646970667358221220ffe86d919f9aabbae4d0120fd78015cd6c21d84d4fbd8737487a5d171e5e638464736f6c6343000701003360c060405234801561001057600080fd5b50604051610b65380380610b6583398101604081905261002f9161004d565b30608052600160005560601b6001600160601b03191660a05261007b565b60006020828403121561005e578081fd5b81516001600160a01b0381168114610074578182fd5b9392505050565b60805160a05160601c610abf6100a66000398061040352806104f45250806102975250610abf6000f3fe608060405234801561001057600080fd5b50600436106100935760003560e01c8063851c1bb311610066578063851c1bb3146100f1578063aaabadc514610104578063d877845c14610119578063e42abf3514610121578063fbfa77cf1461014157610093565b806338e9922e1461009857806355c67628146100ad5780636b6b9f69146100cb5780636daefab6146100de575b600080fd5b6100ab6100a6366004610933565b610149565b005b6100b56101a8565b6040516100c29190610a25565b60405180910390f35b6100ab6100d9366004610933565b6101ae565b6100ab6100ec366004610780565b610201565b6100b56100ff3660046108d3565b610293565b61010c6102e5565b6040516100c291906109b4565b6100b56102f4565b61013461012f366004610801565b6102fa565b6040516100c291906109e1565b61010c610401565b610151610425565b6101686706f05b59d3b20000821115610258610456565b60018190556040517fa9ba3ffe0b6c366b81232caab38605a0699ad5398d6cce76f91ee809e322dafc9061019d908390610a25565b60405180910390a150565b60015490565b6101b6610425565b6101cc662386f26fc10000821115610259610456565b60028190556040517f5a0b7386237e7f07fa741efc64e59c9387d2cccafec760efed4d53387f20e19a9061019d908390610a25565b610209610468565b610211610425565b61021b8483610481565b60005b8481101561028357600086868381811061023457fe5b90506020020160208101906102499190610917565b9050600085858481811061025957fe5b6020029190910135915061027990506001600160a01b038316858361048e565b505060010161021e565b5061028c6104e9565b5050505050565b60007f0000000000000000000000000000000000000000000000000000000000000000826040516020016102c8929190610963565b604051602081830303815290604052805190602001209050919050565b60006102ef6104f0565b905090565b60025490565b6060815167ffffffffffffffff8111801561031457600080fd5b5060405190808252806020026020018201604052801561033e578160200160208202803683370190505b50905060005b82518110156103fb5782818151811061035957fe5b60200260200101516001600160a01b03166370a08231306040518263ffffffff1660e01b815260040161038c91906109b4565b60206040518083038186803b1580156103a457600080fd5b505afa1580156103b8573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906103dc919061094b565b8282815181106103e857fe5b6020908102919091010152600101610344565b50919050565b7f000000000000000000000000000000000000000000000000000000000000000081565b600061043c6000356001600160e01b031916610293565b905061045361044b8233610583565b610191610456565b50565b816104645761046481610615565b5050565b61047a60026000541415610190610456565b6002600055565b6104648183146067610456565b6104e48363a9059cbb60e01b84846040516024016104ad9291906109c8565b60408051601f198184030181529190526020810180516001600160e01b03166001600160e01b031990931692909217909152610625565b505050565b6001600055565b60007f00000000000000000000000000000000000000000000000000000000000000006001600160a01b031663aaabadc56040518163ffffffff1660e01b815260040160206040518083038186803b15801561054b57600080fd5b505afa15801561055f573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906102ef91906108fb565b600061058d6104f0565b6001600160a01b0316639be2a8848484306040518463ffffffff1660e01b81526004016105bc93929190610a2e565b60206040518083038186803b1580156105d457600080fd5b505afa1580156105e8573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061060c91906108ac565b90505b92915050565b610453816210905360ea1b6106cb565b60006060836001600160a01b031683604051610641919061097b565b6000604051808303816000865af19150503d806000811461067e576040519150601f19603f3d011682016040523d82523d6000602084013e610683565b606091505b5091509150600082141561069b573d6000803e3d6000fd5b6106c58151600014806106bd5750818060200190518101906106bd91906108ac565b6101a2610456565b50505050565b62461bcd60e51b600090815260206004526007602452600a808404818106603090810160081b958390069590950190829004918206850160101b01602363ffffff0060e086901c160160181b0190930160c81b60445260e882901c90606490fd5b60008083601f84011261073d578182fd5b50813567ffffffffffffffff811115610754578182fd5b602083019150836020808302850101111561076e57600080fd5b9250929050565b803561060f81610a74565b600080600080600060608688031215610797578081fd5b853567ffffffffffffffff808211156107ae578283fd5b6107ba89838a0161072c565b909750955060208801359150808211156107d2578283fd5b506107df8882890161072c565b90945092505060408601356107f381610a74565b809150509295509295909350565b60006020808385031215610813578182fd5b823567ffffffffffffffff8082111561082a578384fd5b818501915085601f83011261083d578384fd5b81358181111561084b578485fd5b838102915061085b848301610a4d565b8181528481019084860184860187018a1015610875578788fd5b8795505b8386101561089f5761088b8a82610775565b835260019590950194918601918601610879565b5098975050505050505050565b6000602082840312156108bd578081fd5b815180151581146108cc578182fd5b9392505050565b6000602082840312156108e4578081fd5b81356001600160e01b0319811681146108cc578182fd5b60006020828403121561090c578081fd5b81516108cc81610a74565b600060208284031215610928578081fd5b81356108cc81610a74565b600060208284031215610944578081fd5b5035919050565b60006020828403121561095c578081fd5b5051919050565b9182526001600160e01b031916602082015260240190565b60008251815b8181101561099b5760208186018101518583015201610981565b818111156109a95782828501525b509190910192915050565b6001600160a01b0391909116815260200190565b6001600160a01b03929092168252602082015260400190565b6020808252825182820181905260009190848201906040850190845b81811015610a19578351835292840192918401916001016109fd565b50909695505050505050565b90815260200190565b9283526001600160a01b03918216602084015216604082015260600190565b60405181810167ffffffffffffffff81118282101715610a6c57600080fd5b604052919050565b6001600160a01b038116811461045357600080fdfea264697066735822122080bc804ee74f56577a7b1d75698ef820fa50e60bf539ea6679b82cb17e55eae764736f6c63430007010033";
        bytes memory authorizerCode =
            hex"608060405234801561001057600080fd5b5061001c600033610021565b6100ce565b6000828152602081815260409091206100439183906102a5610048821b17901c565b505050565b600061005483836100ad565b6100a357508154600180820184556000848152602080822090930180546001600160a01b0319166001600160a01b038616908117909155855490825282860190935260409020919091556100a7565b5060005b92915050565b6001600160a01b031660009081526001919091016020526040902054151590565b6107d1806100dd6000396000f3fe608060405234801561001057600080fd5b50600436106100935760003560e01c80639be2a884116100665780639be2a88414610116578063a217fddf14610129578063a73cb2ab14610131578063ca15c87314610144578063d547741f1461015757610093565b8063248a9ca3146100985780632f2ff15d146100c15780639010d07c146100d657806391d14854146100f6575b600080fd5b6100ab6100a636600461068a565b61016a565b6040516100b8919061074b565b60405180910390f35b6100d46100cf3660046106a2565b61017f565b005b6100e96100e436600461070b565b6101b5565b6040516100b8919061072c565b6101096101043660046106a2565b6101d6565b6040516100b89190610740565b6101096101243660046106ce565b6101ee565b6100ab610202565b6100d461013f3660046105d0565b610207565b6100ab61015236600461068a565b61025c565b6100d46101653660046106a2565b610273565b60009081526020819052604090206002015490565b6000828152602081905260409020600201546101a79061019f90336101d6565b6101a6610308565b6101b18282610316565b5050565b60008281526020819052604081206101cd908361032e565b90505b92915050565b60008281526020819052604081206101cd908361034a565b60006101fa84846101d6565b949350505050565b600081565b6102138251825161036b565b60005b82518110156102575761024f83828151811061022e57fe5b602002602001015183838151811061024257fe5b602002602001015161017f565b600101610216565b505050565b60008181526020819052604081206101d090610378565b60008281526020819052604090206002015461029b9061029390336101d6565b6101a7610308565b6101b1828261037c565b60006102b1838361034a565b61030057508154600180820184556000848152602080822090930180546001600160a01b0319166001600160a01b038616908117909155855490825282860190935260409020919091556101d0565b5060006101d0565b816101b1576101b181610394565b600082815260208190526040902061025790826102a5565b81546000906103409083106064610308565b6101cd83836103a7565b6001600160a01b031660009081526001919091016020526040902054151590565b6101b18183146067610308565b5490565b600082815260208190526040902061025790826103d4565b6103a4816210905360ea1b6104e2565b50565b60008260000182815481106103b857fe5b6000918252602090912001546001600160a01b03169392505050565b6001600160a01b038116600090815260018301602052604081205480156104d8578354600019808301910180821461048057600086600001828154811061041757fe5b60009182526020909120015487546001600160a01b039091169150819088908590811061044057fe5b600091825260208083209190910180546001600160a01b0319166001600160a01b0394851617905592909116815260018881019092526040902090830190555b855486908061048b57fe5b60008281526020808220830160001990810180546001600160a01b03191690559092019092556001600160a01b03871682526001888101909152604082209190915593506101d092505050565b60009150506101d0565b62461bcd60e51b600090815260206004526007602452600a808404818106603090810160081b958390069590950190829004918206850160101b01602363ffffff0060e086901c160160181b0190930160c81b60445260e882901c90606490fd5b80356001600160a01b03811681146101d057600080fd5b600082601f83011261056a578081fd5b813561057d6105788261077b565b610754565b81815291506020808301908481018184028601820187101561059e57600080fd5b60005b848110156105c5576105b38883610543565b845292820192908201906001016105a1565b505050505092915050565b600080604083850312156105e2578182fd5b823567ffffffffffffffff808211156105f9578384fd5b818501915085601f83011261060c578384fd5b813561061a6105788261077b565b80828252602080830192508086018a82838702890101111561063a578889fd5b8896505b8487101561065c57803584526001969096019592810192810161063e565b509096508701359350505080821115610673578283fd5b506106808582860161055a565b9150509250929050565b60006020828403121561069b578081fd5b5035919050565b600080604083850312156106b4578182fd5b823591506106c58460208501610543565b90509250929050565b6000806000606084860312156106e2578081fd5b833592506106f38560208601610543565b91506107028560408601610543565b90509250925092565b6000806040838503121561071d578182fd5b50508035926020909101359150565b6001600160a01b0391909116815260200190565b901515815260200190565b90815260200190565b60405181810167ffffffffffffffff8111828210171561077357600080fd5b604052919050565b600067ffffffffffffffff821115610791578081fd5b506020908102019056fea264697066735822122016ecb0de68934785c74176b974339821de156ae024b33aa5d13d8e3ad8d6314364736f6c63430007010033";

        address _woas;
        assembly {
            _woas := create2(0, add(woasCode, 0x20), mload(woasCode), salt)
        }
        require(_woas != address(0), "Failed to deploy WOAS");

        address _authorizer;
        assembly {
            _authorizer := create2(0, add(authorizerCode, 0x20), mload(authorizerCode), salt)
        }
        require(_authorizer != address(0), "Failed to deploy Authorizer");

        bytes memory vaultConstructorArgs = abi.encode(_authorizer, _woas, 90 days, 30 days);
        bytes memory vaultDeployCode = abi.encodePacked(vaultCode, vaultConstructorArgs);
        address _vault;
        assembly {
            _vault := create2(0, add(vaultDeployCode, 0x20), mload(vaultDeployCode), salt)
        }
        require(_vault != address(0), "Failed to deploy Vault");

        vault = _vault;
        authorizer = _authorizer;
        woas = _woas;
    }

    function grantRelayerRolesToHelper(address helper) external {
        IVault _vault = IVault(vault);
        IMinimumAuthorizer _authorizer = IMinimumAuthorizer(authorizer);

        _authorizer.grantRole(_vault.getActionId(_vault.joinPool.selector), helper);
        _authorizer.grantRole(_vault.getActionId(_vault.exitPool.selector), helper);
        _authorizer.grantRole(_vault.getActionId(_vault.swap.selector), helper);
    }
}
